<div class="main-content" xmlns="http://www.w3.org/1999/html">

  <div class="d-flex justify-content-center" style="padding: 0.5em;">
    <div class="alert" id="alert">
      <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
      <strong>{{'invalidInput' | translate }} </strong> {{'checkInput' | translate }}
    </div>
  </div>

  <div class="d-flex justify-content-center" style="padding: 2em 1em 1em; margin-top: 1.5em;">
    <form class="main-form" #houseForm="ngForm" (ngSubmit)="addHouse(houseForm)" style="max-width: 80vh;">
      <div class="form-row justify-content-center">
        <h1 class="">{{'makeMoney' | translate }}</h1>
      </div>

      <div class="form-row">
        <div class="col-md-4 mb-3">
          <label>{{'type' | translate }}</label>
          <div class="form-group">
            <select class="custom-select" #category="ngModel" name="category" [ngModel]="house.category" required>
              <option value="0" selected disabled>{{'selectHere' | translate }}</option>
              <option value="1">{{'flat' | translate }}</option>
              <option value="2">{{'house' | translate }}</option>
            </select>
            <p [hidden]="!(category.touched && category.value=='0')" class="invalid">*{{'mustBeSelected' | translate }}
          </div>
        </div>
        <div class="col-md-4 mb-3">
          <label>{{'rooms' | translate }}</label>
          <input type="number" class="form-control" min="1" value="1" #roomsNumber="ngModel" name="roomsNumber"
                 [ngModel]="house.roomsNumber" required>
          <p [hidden]="!(roomsNumber.touched && roomsNumber.invalid)" class="invalid">
            *{{'mustBeFiled' | translate }}</p>
        </div>
        <div class="col-md-4 mb-3">
          <label>{{'bathrooms' | translate }}</label>
          <input type="number" class="form-control" min="1" value="1" #bathroomsNumber="ngModel" name="bathroomsNumber"
                 [ngModel]="house.bathroomsNumber" required>
          <p [hidden]="!(bathroomsNumber.touched && bathroomsNumber.invalid)" class="invalid">
            *{{'mustBeFiled' | translate }}</p>
        </div>
      </div>

      <div class="form-row">
        <div class="col-md-12 mb-3">
          <input class="form-control" ngx-google-places-autocomplete #placesRef="ngx-places"
                 (onAddressChange)="handleAddressChange($event)" placeholder="{{'locationInput' | translate }}"/>
        </div>
        <div class="col-md-5 mb-3">
          <label>{{'country' | translate }}</label>
          <input type="text" class="form-control" disabled placeholder="{{'country' | translate }}" #country="ngModel"
                 name="country" [ngModel]="house.country" required>
          <p [hidden]="!(country.touched && country.invalid)" class="invalid">*{{'mustBeFiled' | translate }}</p>
        </div>
        <div class="col-md-7 mb-3">
          <label>{{'city' | translate }}</label>
          <input type="text" class="form-control" disabled placeholder="{{'city' | translate }}" #city="ngModel"
                 name="city" [ngModel]="house.city" required>
          <p [hidden]="!(city.touched && city.invalid)" class="invalid">*{{'mustBeFiled' | translate }}</p>
        </div>

        <div class="col-md-5 mb-3">
          <label>{{'addressLine' | translate }} 1:</label>
          <input type="text" class="form-control" disabled placeholder="{{'addressLine' | translate }} 1"
                 #AddressLine1="ngModel" name="AddressLine1" [ngModel]="house.addressLine1" required>
          <p [hidden]="!(AddressLine1.touched && AddressLine1.invalid)" class="invalid">
            *{{'mustBeFiled' | translate }}</p>
        </div>
        <div class="col-md-5 mb-3">
          <label>{{'addressLine' | translate }} 2:</label>
          <input type="text" class="form-control" placeholder="{{'addressLine' | translate }} 2" value=""
                 #AddressLine2="ngModel" name="AddressLine2" [ngModel]="house.addressLine2">
        </div>
        <div class="col-md-2 mb-3">
          <label>{{'postalCode' | translate }}</label>
          <input type="text" class="form-control" disabled placeholder="{{'postalCode' | translate }}"
                 #postalCode="ngModel" name="postalCode" [ngModel]="house.postalCode" required>
          <p [hidden]="!(postalCode.touched && postalCode.invalid)" class="invalid">*{{'mustBeFiled' | translate }}</p>
        </div>
      </div>

      <div class="form-row">
        <div class="col-md-4 mb-3">
          <label>{{'price' | translate }}*</label>
          <div class="input-group">
            <div class="input-group-prepend">
              <span class="input-group-text">$</span>
            </div>
            <input type="number" class="form-control" placeholder="Price" min="1" step="0.1" #price="ngModel"
                   name="price" [ngModel]="house.price" required>
          </div>
          <p [hidden]="!(price.touched && price.invalid)" class="invalid">*{{'mustBeFiled' | translate }}</p>
        </div>
        <div class="col-md-8 mb-3">
          <label>{{'selectPhoto' | translate }}</label>
          <div class="custom-file">
            <input type="file" class="custom-file-input" (change)="onSelectFile($event)">
            <label class="custom-file-label">{{'chooseFile' | translate }}</label>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>{{'description' | translate }}</label>
        <textarea class="form-control" style="min-height: 4em; max-height: 12em" rows="3" name="description"
                  [ngModel]="house.description"></textarea>
      </div>
      <div class="form-group">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" style="width: 18px; height: 18px;" [checked]="false"
                 #eula="ngModel" name="eula" [ngModel]="agrrEula" required>
          <a>
            <label class="form-check-label ml-1" (click)="eulaCheck()">{{'agreeTo' | translate }}&nbsp;</label>
            <app-eula></app-eula>
          </a>
          <br>
          <a>
            *{{'angryGabe' | translate }} 3%
          </a>
        </div>
      </div>
      <div class="form-row justify-content-center">
        <button class="btn btn-primary" type="submit" style="width: 20em">{{'createProposition' | translate }}</button>
      </div>
    </form>
  </div>

  <div class="d-flex justify-content-center" style="padding: 1em">
    <div class="box justify-content-center">
      <div class="" style="padding: 1em" *ngFor="let picture of house.photos">
        <div class="card" style="width: 20em;">
          <img class="card-img-top" src="{{picture}}">
          <a (click)="removeImage(picture)" class="btn btn-danger">{{'delete' | translate }}</a>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="!isNewHouse" class="d-flex justify-content-center" style="padding: 1em;">
    <div class="form-group">
      <label>{{'mostPopularMonths' | translate }}</label>
      <div class="chart-wrapper chart">
        <canvas baseChart
                [datasets]="barChartData"
                [labels]="barChartLabels"
                [options]="barChartOptions"
                [plugins]="barChartPlugins"
                [legend]="barChartLegend"
                [chartType]="barChartType">
        </canvas>
      </div>
    </div>
  </div>
</div>
